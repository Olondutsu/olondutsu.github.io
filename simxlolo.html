<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Fruit Drop Game</title>
  <style>
    canvas {
      border: 2px solid black;
      display: block;
      margin: auto;
    }
    #scoreBoard {
      text-align: center;
      font-family: sans-serif;
      font-size: 20px;
      margin-top: 10px;
    }
  </style>
</head>
<body>

<canvas id="gameCanvas" width="800" height="600"></canvas>

<div id="scoreBoard">
  apple x 0<br>
  banana x 0<br>
  pear x 0
</div>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const images = {
  apple: new Image(),
  banana: new Image(),
  pear: new Image(),
  backpack: new Image()
};

images.apple.src = "images/apple.png";
images.banana.src = "images/banana.png";
images.pear.src = "images/pear.png";
images.backpack.src = "images/backpack.png";

const fruits = [];
let draggedFruit = null;

const score = {
  apple: 0,
  banana: 0,
  pear: 0
};

function updateScoreBoard() {
  const scoreDiv = document.getElementById("scoreBoard");
  scoreDiv.innerHTML = `
    apple x ${score.apple}<br>
    banana x ${score.banana}<br>
    pear x ${score.pear}
  `;
}

const backpack = {
  x: canvas.width - 120,
  y: canvas.height - 120,
  width: 100,
  height: 100
};

function spawnFruit() {
  const types = ["apple", "banana", "pear"];
  const name = types[Math.floor(Math.random() * types.length)];
  fruits.push({
    name,
    x: Math.random() * (canvas.width - 60),
    y: -60,
    width: 50,
    height: 50,
    dragging: false,
    inBackpack: false
  });
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);

  // draw backpack
  ctx.drawImage(images.backpack, backpack.x, backpack.y, backpack.width, backpack.height);

  // draw fruits
  for (let fruit of fruits) {
    if (!fruit.dragging && !fruit.inBackpack) {
      fruit.y += 2; // falling
    }
    if (!fruit.inBackpack) {
      ctx.drawImage(images[fruit.name], fruit.x, fruit.y, fruit.width, fruit.height);
    }
  }

  requestAnimationFrame(draw);
}

canvas.addEventListener("mousedown", e => {
  const rect = canvas.getBoundingClientRect();
  const mx = e.clientX - rect.left;
  const my = e.clientY - rect.top;
  for (let fruit of fruits) {
    if (
      mx >= fruit.x && mx <= fruit.x + fruit.width &&
      my >= fruit.y && my <= fruit.y + fruit.height &&
      !fruit.inBackpack
    ) {
      fruit.dragging = true;
      draggedFruit = fruit;
      break;
    }
  }
});

canvas.addEventListener("mousemove", e => {
  if (draggedFruit) {
    const rect = canvas.getBoundingClientRect();
    draggedFruit.x = e.clientX - rect.left - draggedFruit.width / 2;
    draggedFruit.y = e.clientY - rect.top - draggedFruit.height / 2;
  }
});

canvas.addEventListener("mouseup", () => {
  if (draggedFruit) {
    // Check collision with backpack
    if (
      draggedFruit.x + draggedFruit.width > backpack.x &&
      draggedFruit.x < backpack.x + backpack.width &&
      draggedFruit.y + draggedFruit.height > backpack.y &&
      draggedFruit.y < backpack.y + backpack.height
    ) {
      draggedFruit.inBackpack = true;
      if (score[draggedFruit.name] !== undefined) {
        score[draggedFruit.name]++;
        updateScoreBoard();
      }
    }
    draggedFruit.dragging = false;
    draggedFruit = null;
  }
});

setInterval(spawnFruit, 1500);
updateScoreBoard();
draw();
</script>

</body>
</html>